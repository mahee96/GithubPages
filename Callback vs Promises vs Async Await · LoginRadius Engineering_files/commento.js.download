!function(N,i){"use strict";var t,r,E,a,c="s9comments",m="commento-main-area",d="commento-login",T="commento-login-box-container",H="commento-login-box",C="commento-login-box-email-subtitle",L="commento-login-box-email-input",u="commento-login-box-password-input",p="commento-login-box-name-input",v="commento-login-box-website-input",M="commento-login-box-email-button",S="commento-login-box-forgot-link-container",B="commento-login-box-login-link-container",D="commento-login-box-sso-pretext",A="commento-login-box-sso-buttton-container",R="commento-login-box-hr1",O="commento-login-box-oauth-pretext",U="commento-login-box-oauth-buttons-container",I="commento-login-box-hr2",l="commento-mod-tools",s="commento-mod-tools-lock-button",f="commento-error",h="commento-logged-container",g="commento-pre-comments-area",x="commento-comments-area",k="commento-textarea-super-container-",b="commento-textarea-container-",w="commento-textarea-",y="commento-anonymous-checkbox-",P="commento-sort-policy-",j="commento-comment-card-",q="commento-comment-body-",Y="commento-comment-text-",W="commento-comment-subtitle-",J="commento-comment-timeago-",_="commento-comment-score-",F="commento-comment-options-",z="commento-comment-edit-",V="commento-comment-reply-",X="commento-comment-collapse-",$="commento-comment-upvote-",G="commento-comment-downvote-",K="commento-comment-approve-",Q="commento-comment-remove-",Z="commento-comment-sticky-",ee="commento-comment-children-",oe="commento-comment-contents-",ne="commento-comment-name-",te="commento-submit-button-",ie="commento-markdown-button-",re="commento-markdown-help-",ae="https://social9.com/comments",ce="https://social9.com/comments",me=null,de=parent.location.pathname,le=!1,se=[],ue={},pe={},ve=!0,fe=!1,he=!1,ge=!1,xe=!1,be="none",we={},ye={},ke={},Te=!1,He="login",Ce=!1,Le="score-desc",Me=void 0,Se=null;function Be(e){return i.getElementById(e)}function Ne(e,o){e.prepend(o)}function Ee(e,o){e.appendChild(o)}function De(e,o){e.parentNode.insertBefore(o,e.nextSibling)}function Ae(e,o){e.classList.add("commento-"+o)}function Re(e,o){null!==e&&e.classList.remove("commento-"+o)}function Oe(e){return i.createElement(e)}function Ue(e){null!==e&&e.parentNode.removeChild(e)}function Ie(e,o){var n=e.attributes[o];if(void 0!==n)return n.value}function Pe(e){if(null!==e){var o=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(o,e),o}return e}function je(e,o,n){e.addEventListener("click",function(){o(n)},!1)}function qe(e,o,n){e.setAttribute(o,n)}function Ye(e,o,n){var t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onload=function(){n(JSON.parse(t.response))},t.send(JSON.stringify(o))}function We(e){"function"==typeof e&&e()}function Je(e,o){var n,t=new Date;t.setTime(t.getTime()+31536e6),n="; expires="+t.toUTCString(),i.cookie=e+"="+o+n+"; path=/"}function _e(){var e=function(e){var o=("; "+i.cookie).split("; "+e+"=");if(2===o.length)return o.pop().split(";").shift()}("commentoCommenterToken");return void 0===e?"anonymous":e}function Fe(e){pe[e.commenterHex]=e,Me=e.commenterHex;var o,n,t=Oe("div"),i=Oe("div");o="undefined"!==e.link?Oe("a"):Oe("div");var r=Oe("div"),a=io(e.commenterHex+"-"+e.name);t.id=h,Ae(t,"logged-container"),Ae(i,"logged-in-as"),Ae(o,"name"),Ae(r,"profile-button"),o.innerText=e.name,r.innerText="Logout",je(r,N.logout),qe(t,"style","display: none"),"undefined"!==e.link&&qe(o,"href",e.link),"undefined"===e.photo?((n=Oe("div")).style.background=a,n.innerHTML=e.name[0].toUpperCase(),Ae(n,"avatar")):(qe(n=Oe("img"),"src",ce+"/api/commenter/photo?commenterHex="+e.commenterHex),qe(n,"loading","lazy"),Ae(n,"avatar-img")),Ee(i,n),Ee(i,o),Ee(t,i),Ee(t,r),Ne(me,t),le=!0}function ze(o){if("anonymous"===_e())return le=!1,void We(o);var e={commenterToken:_e()};Ye(ae+"/api/commenter/self",e,function(e){if(!e.success)return Je("commentoCommenterToken","anonymous"),void We(o);Fe(e.commenter,e.email),go(),We(o)})}function Ve(e,o){var n=Oe("link"),t=i.getElementsByTagName("head")[0];n.type="text/css",qe(n,"href",e),qe(n,"rel","stylesheet"),function(e,o,n){e.addEventListener("load",function(){o(n)})}(n,o),Ee(t,n)}function Xe(o){var e={commenterToken:_e(),domain:parent.location.host,path:de};Ye(ae+"/api/comment/list",e,function(e){e.success?(Ge(),ve=e.requireIdentification,fe=e.isModerator,he=e.isFrozen,xe=e.attributes.isLocked,be=e.attributes.stickyCommentHex,se=e.comments,pe=Object.assign({},pe,e.commenters),ke=e.configuredOauths,Le=e.defaultSortPolicy,We(o)):$e(e.message)})}function $e(e){var o=Be(f);o.innerText=e,qe(o,"style","display: block;")}function Ge(){qe(Be(f),"style","display: none;")}function Ke(e){var o=Be(k+e),n=Be(ie+e),t=Oe("table"),i=Oe("tr"),r=Oe("td"),a=Oe("td"),c=Oe("tr"),m=Oe("td"),d=Oe("td"),l=Oe("tr"),s=Oe("td"),u=Oe("td"),p=Oe("tr"),v=Oe("td"),f=Oe("td"),h=Oe("tr"),g=Oe("td"),x=Oe("td"),b=Oe("tr"),w=Oe("td"),y=Oe("td");t.id=re+e,Ae(t,"markdown-help"),m.innerHTML="<b>bold</b>",d.innerHTML="surround text with <pre>**two asterisks**</pre>",r.innerHTML="<i>italics</i>",a.innerHTML="surround text with <pre>*asterisks*</pre>",s.innerHTML="<pre>code</pre>",u.innerHTML="surround text with <pre>`backticks`</pre>",v.innerHTML="<strike>strikethrough</strike>",f.innerHTML="surround text with <pre>~~two tilde characters~~</pre>",g.innerHTML="<a href='https://example.com'>hyperlink</a>",x.innerHTML="<pre>[hyperlink](https://example.com)</pre> or just a bare URL",w.innerHTML="<blockquote>quote</blockquote>",y.innerHTML="prefix with <pre>&gt;</pre>",je(n=Pe(n),Qe,e),Ee(i,r),Ee(i,a),Ee(t,i),Ee(c,m),Ee(c,d),Ee(t,c),Ee(h,g),Ee(h,x),Ee(t,h),Ee(l,s),Ee(l,u),Ee(t,l),Ee(p,v),Ee(p,f),Ee(t,p),Ee(b,w),Ee(b,y),Ee(t,b),Ee(o,t)}function Qe(e){var o=Be(ie+e),n=Be(re+e);je(o=Pe(o),Ke,e),Ue(n)}function Ze(e,o){var n=Oe("div"),t=Oe("div"),i=Oe("textarea"),r=Oe("div"),a=Oe("input"),c=Oe("label"),m=Oe("button"),d=Oe("a");return n.id=k+e,t.id=b+e,i.id=w+e,a.id=y+e,m.id=te+e,d.id=ie+e,Ae(t,"textarea-container"),Ae(r,"round-check"),Ae(r,"anonymous-checkbox-container"),Ae(m,"button"),Ae(m,"submit-button"),Ae(d,"markdown-button"),Ae(n,"button-margin"),qe(i,"placeholder","Add a comment"),qe(a,"type","checkbox"),qe(c,"for",y+e),c.innerText="Comment anonymously",m.innerText=!0===o?"Save Changes":"Add Comment",d.innerHTML="<b>M &#8595;</b> &nbsp; Markdown",Te&&(a.checked=!0,a.setAttribute("disabled",!0)),i.oninput=function(e){return function(){e.style.height="",e.style.height=Math.min(Math.max(e.scrollHeight,75),400)+"px"}}(i),je(m,!0===o?mo:po,e),je(d,Ke,e),Ee(t,i),Ee(n,t),Ee(r,a),Ee(r,c),Ee(n,m),ve||!0===o||Ee(n,r),Ee(n,d),n}N.logout=function(){Je("commentoCommenterToken","anonymous"),fe=le=!1,Me=void 0,o()};var eo={"score-desc":"Upvotes","creationdate-desc":"Newest","creationdate-asc":"Oldest"};function oo(e){Re(Be(P+Le),"sort-policy-button-selected");var o=Be(x);o.innerHTML="",Le=e;var n=ao(lo(se),"root");n&&Ee(o,n),Ae(Be(P+e),"sort-policy-button-selected")}function no(e){var o=Oe("div"),n=Oe("div"),t=Be(m),i=Oe("div"),r=Oe("div");o.id=d,i.id=g,r.id=x,Ae(o,"login"),Ae(n,"login-text"),Ae(r,"comments"),n.innerText="Login",r.innerHTML="",je(n,N.loginBoxShow,null);var a=0;Object.keys(ke).forEach(function(e){ke[e]&&a++}),0<a?Ee(o,n):ve||(Te=!0),xe||he?le||ge?(Ee(t,to("This thread is locked. You cannot add new comments.")),Ue(Be(d))):(Ee(t,o),Ee(t,Ze("root"))):(le?Ue(Be(d)):Ee(t,o),Ee(t,Ze("root"))),0<se.length&&Ee(t,function(){var e=Oe("div"),o=Oe("div");for(var n in Ae(e,"sort-policy-buttons-container"),Ae(o,"sort-policy-buttons"),eo){var t=Oe("a");t.id=P+n,Ae(t,"sort-policy-button"),n===Le&&Ae(t,"sort-policy-button-selected"),t.innerText=eo[n],je(t,oo,n),Ee(o,t)}return Ee(e,o),e}()),Ee(t,i),Ee(t,r),Ee(me,t),We(e)}function to(e){var o=Oe("div");return Ae(o,"moderation-notice"),o.innerText=e,o}function io(e){for(var o=["#396ab1","#da7c30","#3e9651","#cc2529","#922428","#6b4c9a","#535154"],n=0,t=0;t<e.length;t++)n+=e.charCodeAt(t);return o[n%o.length]}function ro(e){return 1!==e?e+" points":e+" point"}N.commentNew=function(c,m,d){var l=Be(k+c),s=Be(w+c),u=Be(V+c),p=s.value;if(""!==p){Re(s,"red-border");var e={commenterToken:m,domain:parent.location.host,path:de,parentHex:c,markdown:p};Ye(ae+"/api/comment/new",e,function(e){if(e.success){Ge();var o="";"unapproved"===e.state?o="Your comment is under moderation.":"flagged"===e.state&&(o="Your comment was flagged as spam and is under moderation."),""!==o&&Ne(Be(k+c),to(o));var n=Me;void 0!==n&&"anonymous"!==m||(n="anonymous");var t={commentHex:e.commentHex,commenterHex:n,markdown:p,html:e.html,parentHex:"root",score:0,state:"approved",direction:0,creationDate:new Date},i=ao({root:[t]},"root");if(ue[e.commentHex]=t,"root"!==c)l.replaceWith(i),we[c]=!1,Ae(u,"option-reply"),Re(u,"option-cancel"),u.title="Reply to this comment",je(u,N.replyShow,c);else{s.value="";var r=Be(x);if(r.style.paddingTop="2em",r.style.marginTop="2em",r.style.borderTop="1px solid #00000020",!Be("all-comments-label")){var a=Oe("span");a.id="all-comments-label",a.innerHTML="All Comments",r.prepend(a)}Be(g).innerHTML="Just Added By You",De(Be(g),i)}We(d)}else $e(e.message)})}else Ae(s,"red-border")};var n={"score-desc":function(e,o){return o.score-e.score},"creationdate-desc":function(e,o){return e.creationDate<o.creationDate?1:-1},"creationdate-asc":function(e,o){return e.creationDate<o.creationDate?-1:1}};function ao(L,M){var e=L[M];if(!e||!e.length)return null;e.sort(function(e,o){return e.deleted||e.commentHex!==be?o.deleted||o.commentHex!==be?n[Le](e,o):1/0:-1/0});var S=(new Date).getTime(),B=Oe("div");return e.forEach(function(e){var o,n,t=pe[e.commenterHex],i=Oe("div"),r=Oe("div"),a=Oe("div"),c=Oe("div"),m=Oe("div"),d=Oe("div"),l=Oe("div"),s=Oe("div"),u=Oe("button"),p=Oe("button"),v=Oe("button"),f=Oe("button"),h=Oe("button"),g=Oe("button"),x=Oe("button"),b=Oe("button"),w=ao(L,e.commentHex),y=Oe("div"),k=io(e.commenterHex+"-"+t.name);if(n="undefined"!==t.link&&"https://undefined"!==t.link&&""!==t.link?Oe("a"):Oe("div"),i.id=j+e.commentHex,d.id=q+e.commentHex,l.id=Y+e.commentHex,a.id=W+e.commentHex,c.id=J+e.commentHex,m.id=_+e.commentHex,s.id=F+e.commentHex,u.id=z+e.commentHex,p.id=V+e.commentHex,v.id=X+e.commentHex,f.id=$+e.commentHex,h.id=G+e.commentHex,g.id=K+e.commentHex,x.id=Q+e.commentHex,b.id=Z+e.commentHex,w&&(w.id=ee+e.commentHex),y.id=oe+e.commentHex,n.id=ne+e.commentHex,v.title="Collapse children",f.title="Upvote",h.title="Downvote",u.title="Edit",p.title="Reply",g.title="Approve",x.title="Remove",be===e.commentHex?b.title=fe?"Unsticky":"This comment has been stickied":b.title="Sticky",c.title=e.creationDate.toString(),i.style.borderLeft="2px solid "+k,e.deleted?n.innerText="[deleted]":n.innerText=t.name,l.innerHTML=e.html,c.innerHTML=function(e,o){var n=2592e6,t=e-o;return t<5e3?"just now":t<12e4?Math.round(t/1e3)+" seconds ago":t<72e5?Math.round(t/6e4)+" minutes ago":t<1728e5?Math.round(t/36e5)+" hours ago":t<5184e6?Math.round(t/864e5)+" days ago":t<62208e6?Math.round(t/n)+" months ago":Math.round(t/31104e6)+" years ago"}(S,e.creationDate),m.innerText=ro(e.score),"undefined"===t.photo?((o=Oe("div")).style.background=k,"anonymous"===e.commenterHex?(o.innerHTML="?",o.style["font-weight"]="bold"):o.innerHTML=t.name[0].toUpperCase(),Ae(o,"avatar")):(qe(o=Oe("img"),"src",ce+"/api/commenter/photo?commenterHex="+t.commenterHex),Ae(o,"avatar-img")),Ae(i,"card"),fe&&"approved"!==e.state&&Ae(i,"dark-card"),t.isModerator&&Ae(n,"moderator"),"flagged"===e.state&&Ae(n,"flagged"),Ae(r,"header"),Ae(n,"name"),Ae(a,"subtitle"),Ae(c,"timeago"),Ae(m,"score"),Ae(d,"body"),Ae(s,"options"),Se&&Ae(s,"options-mobile"),Ae(u,"option-button"),Ae(u,"option-edit"),Ae(p,"option-button"),Ae(p,"option-reply"),Ae(v,"option-button"),Ae(v,"option-collapse"),Ae(f,"option-button"),Ae(f,"option-upvote"),Ae(h,"option-button"),Ae(h,"option-downvote"),Ae(g,"option-button"),Ae(g,"option-approve"),Ae(x,"option-button"),Ae(x,"option-remove"),Ae(b,"option-button"),be===e.commentHex?Ae(b,"option-unsticky"):Ae(b,"option-sticky"),le&&(0<e.direction?Ae(f,"upvoted"):e.direction<0&&Ae(h,"downvoted")),je(u,N.editShow,e.commentHex),je(v,N.commentCollapse,e.commentHex),je(g,N.commentApprove,e.commentHex),je(x,N.commentDelete,e.commentHex),je(b,N.commentSticky,e.commentHex),le){var T=co(f,h,e.commentHex,e.direction);f=T[0],h=T[1]}else je(f,N.loginBoxShow,null),je(h,N.loginBoxShow,null);je(p,N.replyShow,e.commentHex),"undefined"!==t.link&&"https://undefined"!==t.link&&""!==t.link&&qe(n,"href",t.link),Ee(s,v),e.deleted||(Ee(s,h),Ee(s,f)),e.commenterHex===Me?Ee(s,u):e.deleted||Ee(s,p),!e.deleted&&fe&&"root"===M&&Ee(s,b),e.deleted||!fe&&e.commenterHex!==Me||Ee(s,x),fe&&"approved"!==e.state&&Ee(s,g),e.deleted||fe||be!==e.commentHex||Ee(s,b),qe(s,"style","width: "+32*(s.childNodes.length+1)+"px;");for(var H=0;H<s.childNodes.length;H++)qe(s.childNodes[H],"style","right: "+32*H+"px;");if(Ee(a,m),Ee(a,c),Se||Ee(r,s),Ee(r,o),Ee(r,n),Ee(r,a),Ee(d,l),Ee(y,d),Se){Ee(y,s);var C=Oe("div");Ae(C,"options-clearfix"),Ee(y,C)}w&&(Ae(w,"body"),Ee(y,w)),Ee(i,r),Ee(i,y),e.deleted&&("true"===E||null===w)||Ee(B,i)}),0===B.childNodes.length?null:B}function co(e,o,n,t){return e=Pe(e),o=Pe(o),0<t?(je(e,N.vote,[n,[1,0]]),je(o,N.vote,[n,[1,-1]])):t<0?(je(e,N.vote,[n,[-1,1]]),je(o,N.vote,[n,[-1,0]])):(je(e,N.vote,[n,[0,1]]),je(o,N.vote,[n,[0,-1]])),[e,o]}function mo(i){var e=Be(w+i),r=e.value;if(""!==r){Re(e,"red-border");var o={commenterToken:_e(),commentHex:i,markdown:r};Ye(ae+"/api/comment/edit",o,function(e){if(e.success){Ge(),ue[i].markdown=r,ue[i].html=e.html;var o=Be(z+i),n=Be(k+i);n.innerHTML=ue[i].html,n.id=Y+i,delete ye[i],Ae(o,"option-edit"),Re(o,"option-cancel"),o.title="Edit comment",je(o=Pe(o),N.editShow,i);var t="";"unapproved"===e.state?t="Your comment is under moderation.":"flagged"===e.state&&(t="Your comment was flagged as spam and is under moderation."),""!==t&&Ne(Be(k+i),to(t))}else $e(e.message)})}else Ae(e,"red-border")}function lo(e){var n={};return e.forEach(function(e){var o=e.parentHex;o in n||(n[o]=[]),e.creationDate=new Date(e.creationDate),n[o].push(e),ue[e.commentHex]={html:e.html,markdown:e.markdown}}),n}function so(){var e=Be(x);e.innerHTML="";var o=ao(lo(se),"root");o&&Ee(e,o)}function uo(e){le?N.commentNew(e,_e()):N.loginBoxShow(e)}function po(e){if(ve)uo(e);else{var o=Be(y+e),n=Be(w+e);if(""!==n.value)return Re(n,"red-border"),o.checked?void function(e){ge=!0,N.commentNew(e,"anonymous")}(e):void uo(e);Ae(n,"red-border")}}function o(e){Be(c).innerHTML="",we={},N.main(e)}function vo(e,o,n){Ye(ae+"/api/commenter/login",{email:e,password:o},function(e){if(!e.success)return N.loginBoxClose(),void $e(e.message);Ge(),Je("commentoCommenterToken",e.commenterToken),Fe(e.commenter,e.email),go(),Ue(Be(d)),null!==n?N.commentNew(n,e.commenterToken,function(){N.loginBoxClose()}):(N.loginBoxClose(),Xe(so))})}function fo(o){var e={isLocked:xe,stickyCommentHex:be},n={commenterToken:_e(),domain:parent.location.host,path:de,attributes:e};Ye(ae+"/api/page/update",n,function(e){e.success?(Ge(),We(o)):$e(e.message)})}function ho(){void 0===t?go():Ve(t,go)}function go(){var e=Be(m),o=Be(l),n=Be(h);qe(e,"style",""),fe&&qe(o,"style",""),n&&qe(n,"style","")}function e(){for(var e=function(e){return i.getElementsByTagName(e)}("script"),o=0;o<e.length;o++)if(e[o].src.match(/\/js\/commento\.js$/)||e[o].src.match(/\/js\/s9comments\.js$/)){var n=Ie(e[o],"data-page-id");void 0!==n&&(de=n),t=Ie(e[o],"data-css-override"),a=Ie(e[o],"data-auto-init"),void 0===(c=Ie(e[o],"data-id-root"))&&(c="s9comments"),r=Ie(e[o],"data-no-fonts"),E=Ie(e[o],"data-hide-deleted")}}N.commentApprove=function(i){var e={commenterToken:_e(),commentHex:i};Ye(ae+"/api/comment/approve",e,function(e){if(e.success){Ge();var o=Be(j+i),n=Be(ne+i),t=Be(K+i);Re(o,"dark-card"),Re(n,"flagged"),Ue(t)}else $e(e.message)})},N.commentDelete=function(o){if(confirm("Are you sure you want to delete this comment?")){var e={commenterToken:_e(),commentHex:o};Ye(ae+"/api/comment/delete",e,function(e){e.success?(Ge(),Be(Y+o).innerText="[deleted]"):$e(e.message)})}},N.vote=function(e){var o=e[0],n=e[1][0],t=e[1][1],i=Be($+o),r=Be(G+o),a=Be(_+o),c={commenterToken:_e(),commentHex:o,direction:t},m=co(i,r,o,t);i=m[0],r=m[1],Re(i,"upvoted"),Re(r,"downvoted"),0<t?Ae(i,"upvoted"):t<0&&Ae(r,"downvoted"),a.innerText=ro(parseInt(a.innerText.replace(/[^\d-.]/g,""))+t-n),Ye(ae+"/api/comment/vote",c,function(e){if(!e.success)return $e(e.message),Re(i,"upvoted"),Re(r,"downvoted"),a.innerText=ro(parseInt(a.innerText.replace(/[^\d-.]/g,""))-t+n),void co(i,r,o,n);Ge()})},N.editShow=function(e){if(!(e in ye&&ye[e])){var o=Be(Y+e);ye[e]=!0,o.replaceWith(Ze(e,!0)),Be(w+e).value=ue[e].markdown;var n=Be(z+e);Re(n,"option-edit"),Ae(n,"option-cancel"),n.title="Cancel edit",je(n=Pe(n),N.editCollapse,e)}},N.editCollapse=function(e){var o=Be(z+e),n=Be(k+e);n.innerHTML=ue[e].html,n.id=Y+e,delete ye[e],Ae(o,"option-edit"),Re(o,"option-cancel"),o.title="Edit comment",je(o=Pe(o),N.editShow,e)},N.replyShow=function(e){if(!(e in we&&we[e])){De(Be(Y+e),Ze(e)),we[e]=!0;var o=Be(V+e);Re(o,"option-reply"),Ae(o,"option-cancel"),o.title="Cancel reply",je(o=Pe(o),N.replyCollapse,e)}},N.replyCollapse=function(e){var o=Be(V+e);Be(k+e).remove(),delete we[e],Ae(o,"option-reply"),Re(o,"option-cancel"),o.title="Reply to this comment",je(o=Pe(o),N.replyShow,e)},N.commentCollapse=function(e){var o=Be(ee+e),n=Be(X+e);o&&Ae(o,"hidden"),Re(n,"option-collapse"),Ae(n,"option-uncollapse"),n.title="Expand children",je(n=Pe(n),N.commentUncollapse,e)},N.commentUncollapse=function(e){var o=Be(ee+e),n=Be(X+e);o&&Re(o,"hidden"),Re(n,"option-uncollapse"),Ae(n,"option-collapse"),n.title="Collapse children",je(n=Pe(n),N.commentCollapse,e)},N.commentoAuth=function(e){var n=e.provider,t=e.id,i=window.open("","_blank");!function(e,o){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){o(JSON.parse(n.response))},n.send(null)}(ae+"/api/commenter/token/new",function(o){if(o.success){Ge(),Je("commentoCommenterToken",o.commenterToken),i.location=ae+"/api/oauth/"+n+"/redirect?commenterToken="+o.commenterToken;var e=setInterval(function(){i.closed&&(clearInterval(e),ze(function(){var e=Be(h);e&&qe(e,"style",""),"anonymous"!==_e()&&Ue(Be(d)),null!==t?N.commentNew(t,o.commenterToken,function(){N.loginBoxClose()}):(N.loginBoxClose(),Xe(so))}))},250)}else $e(o.message)})},N.popupRender=function(n){var e=Be(T),o=Oe("div"),t=Oe("div"),i=Oe("div"),r=Oe("div"),a=Oe("hr"),c=Oe("div"),m=Oe("div"),d=Oe("div"),l=Oe("hr"),s=Oe("div"),u=Oe("div"),p=Oe("div"),v=Oe("input"),f=Oe("button"),h=Oe("div"),g=Oe("a"),x=Oe("div"),b=Oe("a"),w=Oe("div");o.id=H,s.id=C,v.id=L,f.id=M,h.id=S,x.id=B,i.id=A,t.id=D,a.id=R,c.id=O,m.id=U,l.id=I,Ae(e,"login-box-container"),Ae(o,"login-box"),Ae(s,"login-box-subtitle"),Ae(u,"email-container"),Ae(p,"email"),Ae(v,"input"),Ae(f,"email-button"),Ae(h,"forgot-link-container"),Ae(g,"forgot-link"),Ae(x,"login-link-container"),Ae(b,"login-link"),Ae(t,"login-box-subtitle"),Ae(i,"oauth-buttons-container"),Ae(r,"oauth-buttons"),Ae(c,"login-box-subtitle"),Ae(m,"oauth-buttons-container"),Ae(d,"oauth-buttons"),Ae(w,"login-box-close"),Ae(me,"root-min-height"),g.innerText="Forgot your password?",b.innerText="Don't have an account? Sign up.",s.innerText="Login with your email address",f.innerText="Continue",c.innerText="Proceed with social login",t.innerText="Proceed with "+parent.location.host+" authentication",je(f,N.passwordAsk,n),je(g,N.forgotPassword,n),je(b,N.popupSwitch,n),je(w,N.loginBoxClose),qe(e,"style","display: none; opacity: 0;"),qe(v,"name","email"),qe(v,"placeholder","Email address"),qe(v,"type","text");var y=0;if(["google","twitter","github","gitlab"].forEach(function(e){if(ke[e]){var o=Oe("button");Ae(o,"button"),Ae(o,e+"-button"),o.innerText=e,je(o,N.commentoAuth,{provider:e,id:n}),Ee(d,o),y++}}),ke.sso){var k=Oe("button");Ae(k,"button"),Ae(k,"sso-button"),k.innerText="Single Sign-On",je(k,N.commentoAuth,{provider:"sso",id:n}),Ee(r,k),Ee(i,r),Ee(o,t),Ee(o,i),(0<y||ke.commento)&&Ee(o,a)}Ce=0<y&&(Ee(o,c),Ee(m,d),Ee(o,m),!0),Ee(p,v),Ee(p,f),Ee(u,p),Ee(h,g),Ee(x,b),0<y&&ke.commento&&Ee(o,l),ke.commento&&(Ee(o,s),Ee(o,u),Ee(o,h),Ee(o,x)),Ee(o,w),He="login",e.innerHTML="",Ee(e,o)},N.forgotPassword=function(){window.open("","_blank").location=ae+"/forgot?commenter=true",N.loginBoxClose()},N.popupSwitch=function(e){var o=Be(C);Ce&&(Ue(Be(U)),Ue(Be(O)),Ue(Be(R)),Ue(Be(I))),ke.sso&&(Ue(Be(A)),Ue(Be(D)),Ue(Be(R)),Ue(Be(I))),Ue(Be(B)),Ue(Be(S)),o.innerText="Create an account",He="signup",N.passwordAsk(e),Be(L).focus()},N.login=function(e){var o=Be(L),n=Be(u);vo(o.value,n.value,e)},N.signup=function(o){var n=Be(L),e=Be(p),t=Be(v),i=Be(u),r={email:n.value,name:e.value,website:t.value,password:i.value};Ye(ae+"/api/commenter/new",r,function(e){if(!e.success)return N.loginBoxClose(),void $e(e.message);Ge(),vo(n.value,i.value,o)})},N.passwordAsk=function(e){var o,n,t,i,r=Be(H),a=Be(C);Ue(Be(M)),Ue(Be(B)),Ue(Be(S)),Ce&&0<ke.length&&(Ue(Be(R)),Ue(Be(I)),Ue(Be(O)),Ue(Be(U))),i="signup"===He?(o=["name","website","password"],n=[p,v,u],t=["text","text","password"],["Real Name","Website (Optional)","Password"]):(o=["password"],n=[u],t=["password"],["Password"]),a.innerText="signup"===He?"Finish the rest of your profile to complete.":"Enter your password to log in.";for(var c=0;c<o.length;c++){var m=Oe("div"),d=Oe("div"),l=Oe("input");if(l.id=n[c],Ae(m,"email-container"),Ae(d,"email"),Ae(l,"input"),qe(l,"name",o[c]),qe(l,"type",t[c]),qe(l,"placeholder",i[c]),Ee(d,l),Ee(m,d),"password"===o[c]){var s=Oe("button");Ae(s,"email-button"),s.innerText=He,je(s,"signup"===He?N.signup:N.login,e),Ee(d,s)}Ee(r,m)}"signup"===He?Be(p).focus():Be(u).focus()},N.threadLockToggle=function(){var e=Be(s);xe=!xe,e.disabled=!0,fo(function(){e.disabled=!1,o()})},N.commentSticky=function(o){if("none"!==be){var e=Be(Z+be);Re(e,"option-unsticky"),Ae(e,"option-sticky")}be=be===o?"none":o,fo(function(){var e=Be(Z+o);be===o?(Re(e,"option-sticky"),Ae(e,"option-unsticky")):(Re(e,"option-unsticky"),Ae(e,"option-sticky"))})},N.loginBoxClose=function(){var e=Be(m),o=Be(T);Re(e,"blurred"),Re(me,"root-min-height"),qe(o,"style","display: none"),window.history.pushState("",i.title,window.location.pathname)},N.loginBoxShow=function(e){var o=Be(m),n=Be(T);N.popupRender(e),Ae(o,"blurred"),qe(n,"style",""),window.location.hash=T,Be(L).focus()};var xo=!(N.main=function(e){if(null===(me=Be(c))){var o=Be("commento");if(null===o)return void console.log("[comments] error: no root element with ID '"+c+"' found");c="commento",me=o}null===Se&&(Se=me.getBoundingClientRect().width<450),Ae(me,"root"),"true"!==r&&Ae(me,"root-font"),function(){var e=Oe("div");e.id=T,Ee(me,e)}(),function(){var e=Oe("div");e.id=f,Ae(e,"error-box"),qe(e,"style","display: none;"),Ee(me,e)}(),function(){var e=Oe("div");e.id=m,Ae(e,"main-area"),qe(e,"style","display: none"),Ee(me,e)}();var n=function(){var e=Oe("div"),o=Oe("div"),n=Oe("a"),t=Oe("span");return e.id="commento-footer",Ae(e,"footer"),Ae(o,"logo-container"),Ae(n,"logo"),Ae(t,"logo-text"),qe(n,"href","https://social9.com?utm_medium=comments"),qe(n,"target","_blank"),t.innerText="Social9",Ee(n,t),Ee(o,n),Ee(e,o),e}();Ve(ce+"/css/commento.css",ho),ze(function(){Xe(function(){!function(){var e=Oe("div"),o=Oe("button");e.id=l,o.id=s,Ae(e,"mod-tools"),o.innerHTML=xe?"Unlock Thread":"Lock Thread",je(o,N.threadLockToggle),qe(e,"style","display: none"),Ee(e,o),Ee(me,e)}(),no(function(){so(),Ee(me,n),function(){if(window.location.hash)if(window.location.hash.startsWith("#commento-")){var e=Be(j+window.location.hash.split("-")[1]);if(null===e)return;Ae(e,"highlighted-card"),e.scrollIntoView(!0)}else window.location.hash.startsWith("#commento")&&me.scrollIntoView(!0)}(),go(),function(){for(var e=i.getElementsByClassName("commento-name"),o=0;o<e.length;o++)qe(e[o],"style","max-width: "+(e[o].getBoundingClientRect().width+20)+"px;")}(),We(e)})})})});function bo(){xo||(xo=!0,e(),"true"===a||void 0===a?N.main(void 0):"false"!==a&&console.log("[comments] error: invalid value for data-auto-init; allowed values: true, false"))}var wo=function(){var e=i.readyState;"loading"===e?i.addEventListener("readystatechange",wo):"interactive"===e?bo():"complete"===e&&bo()};wo()}(window.s9comments||window.commento,document);